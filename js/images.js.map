{
"version":3,
"file":"internal/js/images.js",
"lineCount":12,
"mappings":"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",
"sources":[" [synthetic:es6/util/arrayiterator] "," [synthetic:es6/util/makeiterator] "," [synthetic:es6/util/arrayfromiterable] "," [synthetic:es6/util/arrayfromiterator] ","src/js/images/make-io.js","node_modules/@lemuria/absolute-proxy/src/index.js","src/js/images/contours.js","src/js/images/webp.js","src/js/images/io.js","src/js/images/index.js"],
"sourcesContent":["/*\n * Copyright 2016 The Closure Compiler Authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Utility method for creating an iterator for Arrays.\n */\n'require base';\n\n/**\n * Returns an internal iterator from the given array.\n * @param {!Array<T>} array\n * @return {function():!IIterableResult<T>}\n * @template T\n */\n$jscomp.arrayIteratorImpl = function(array) {\n  var index = 0;\n  return function() {\n    if (index < array.length) {\n      return {\n        done: false,\n        value: array[index++],\n      };\n    } else {\n      return {done: true};\n    }\n  };\n};\n\n/**\n * Returns an internal iterator from the given array.\n * @param {!Array<T>} array\n * @return {!Iterator<T>}\n * @template T\n */\n$jscomp.arrayIterator = function(array) {\n  return /** @type {!Iterator<T>} */ ({next: $jscomp.arrayIteratorImpl(array)});\n};\n\n","/*\n * Copyright 2016 The Closure Compiler Authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Polyfill for for-of loops.\n */\n'require es6/util/arrayiterator';\n\n/**\n * Creates an iterator for the given iterable.  This iterator should never\n * be exposed to user code.\n *\n * @param {string|!Iterable<T>|!Iterator<T>|!Arguments} iterable\n * @return {!Iterator<T>}\n * @template T\n * @suppress {reportUnknownTypes}\n */\n$jscomp.makeIterator = function(iterable) {\n  // NOTE: Disabling typechecking because [] not allowed on @struct.\n  var iteratorFunction = typeof Symbol != 'undefined' && Symbol.iterator &&\n      (/** @type {?} */ (iterable)[Symbol.iterator]);\n  return iteratorFunction ? iteratorFunction.call(iterable) :\n      $jscomp.arrayIterator(/** @type {!Array} */ (iterable));\n};\n","/*\n * Copyright 2016 The Closure Compiler Authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Polyfill for array destructuring.\n */\n'require es6/util/makeiterator';\n'require es6/util/arrayfromiterator';\n\n\n/**\n * Copies the values from an Iterable into an Array.\n * @param {string|!Array<T>|!Iterable<T>|!Arguments} iterable\n * @return {!Array<T>}\n * @template T\n */\n$jscomp.arrayFromIterable = function(iterable) {\n  if (iterable instanceof Array) {\n    return iterable;\n  } else {\n    return $jscomp.arrayFromIterator($jscomp.makeIterator(iterable));\n  }\n};\n","/*\n * Copyright 2016 The Closure Compiler Authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Polyfill for array destructuring.\n */\n'require base';\n\n\n/**\n * Copies the values from an Iterator into an Array. The important difference\n * between this and $jscomp.arrayFromIterable is that if the iterator's\n * next() method has already been called one or more times, this method returns\n * only the values that haven't been yielded yet.\n * @param {!Iterator<T>} iterator\n * @return {!Array<T>}\n * @template T\n * @suppress {reportUnknownTypes}\n */\n$jscomp.arrayFromIterator = function(iterator) {\n  var i;\n  var arr = [];\n  while (!(i = iterator.next()).done) {\n    arr.push(i.value);\n  }\n  return arr;\n};\n","/**\n * Creates an intersection observer.\n */\nconst makeIo = (callback, options = { rootMargin: '50px' }) => {\n  const io = new IntersectionObserver((entries) => {\n    entries.forEach(({ target, isIntersecting }) => {\n      if (isIntersecting) {\n        io.unobserve(target)\n        callback(target)\n      }\n    })\n  }, options)\n  return io\n}\n\n\nexport default makeIo","/**\n * Assigns Styles To Position Element Absolutely On Top Of The Target One.\n * @param {!HTMLElement} obj The target element to position absolutely.\n * @param {!HTMLElement} element The source element.\n */\nexport default function(obj, element) {\n  const rect = element.getBoundingClientRect()\n  const top = rect.top + window.scrollY\n  const left = rect.left + window.scrollX\n  const width = rect.width\n  const height = rect.height\n\n  const cs = getComputedStyle(element)\n  const pt = parseInt(cs.paddingTop, 10)\n  const pb = parseInt(cs.paddingBottom, 10)\n  const pl = parseInt(cs.paddingLeft, 10)\n  const pr = parseInt(cs.paddingRight, 10)\n  const bt = parseInt(cs.borderTopWidth, 10)\n  const bl = parseInt(cs.borderLeftWidth, 10)\n  const br = parseInt(cs.borderRightWidth, 10)\n  const bb = parseInt(cs.borderBottomWidth, 10)\n\n  obj.style.position = 'absolute'\n  obj.style.top = top + (pt + bt) + 'px'\n  obj.style.left = left + (pl + bl) + 'px'\n  obj.style.width = width - (pl + pr + bl + br) + 'px'\n  obj.style.height = height - (pt + pb + bt + bb) + 'px'\n}","import './externs'\nimport makeIo from './make-io'\nimport positionAbsolute from '@lemuria/absolute-proxy'\n\n/**\n * When image-placeholder is scrolled into view.\n * @param {!HTMLElement} object\n */\nconst callback = (object) => {\n  if (!object) return\n  const potrace = object.getAttribute('data-potrace')\n  if (!potrace) return\n  const potraceNoAnimate = object.getAttribute('data-potrace-no-animate') !== null\n  const potraceNoInteract = (object.getAttribute('data-potrace-no-interact') !== null) || potraceNoAnimate\n\n  object.removeAttribute('data-potrace')\n  const oid = object.id.replace(/^s/, 'o')\n\n  const obj = /** @type {!HTMLElement} */ (document.createElement('object'))\n  obj.type = 'image/svg+xml'\n  obj.style.visibility = 'hidden'\n  obj.id = oid\n  obj.data = potrace\n\n  positionAbsolute(obj, object)\n  window.addEventListener('element-resize', () => {\n    positionAbsolute(obj, object['_picture'] || object)\n  })\n\n  obj.onload = potraceNoAnimate ? () => {\n    obj.style.visibility = ''\n  } : () => {\n    const { contentDocument: doc } = obj\n    const svg = doc.querySelector('svg')\n    const use = svg.querySelector('use[data-mask]')\n    use.setAttribute('mask', use.getAttribute('data-mask'))\n    use.setAttribute('fill', 'none')\n\n    animatePaths(svg)\n    use.setAttribute('stroke', use.getAttribute('data-stroke'))\n\n    obj.style.visibility = ''\n\n    use.removeAttribute('data-stroke')\n    use.removeAttribute('data-mask')\n  }\n\n  let clearTransition = true\n  if (!potraceNoInteract) obj.onmouseover = () => {\n    // debugger\n    if (!obj['_finishedAppear']) return\n\n    obj.style.opacity = ''\n    animatePaths(obj.contentDocument.querySelector('svg'), {\n      clearTransition,\n    })\n    clearTransition = false\n  }\n  if (!potraceNoInteract) obj.onmouseleave = () => {\n    if (!obj['_finishedAppear']) return\n\n    animatePaths(obj.contentDocument.querySelector('svg'), {\n      reverse: true,\n    })\n    // obj.style.opacity = 0\n  }\n\n  document.body.appendChild(obj)\n}\n\n/**\n * @param {Element} svg\n * @param {Object} [opts]\n * @param {boolean} [opts.reverse]\n * @param {number} [opts.seconds]\n * @param {boolean} [opts.clearTransition]\n */\nconst animatePaths = (svg, opts = {}) => {\n  const {\n    reverse = false, seconds = 7, clearTransition = false,\n  } = opts\n\n  /** @type {Array<SVGPathElement>} */\n  const paths = [...svg.querySelectorAll('path')]\n\n  paths.forEach((path) => {\n    const length = path.getTotalLength()\n    // Clear any previous transition\n    if (clearTransition)\n      path.style.transition = path.style.webkitTransition = 'none'\n\n    const l = `${length}`\n    // Set up the starting positions\n    path.style['strokeDasharray'] = `${length} ${length}`\n    path.style['strokeDashoffset'] = reverse ? '0' : l\n\n    // Trigger a layout so styles are calculated & the browser\n    // picks up the starting position before animating\n    path.getBoundingClientRect()\n\n    // Define our transition\n    path.style.transition = path.style.webkitTransition =\n      `stroke-dashoffset ${seconds}s ease-in-out`\n\n    // Go!\n    path.style['strokeDashoffset'] = reverse ? l : '0'\n  })\n}\n\nexport default function SPLENDID_CONTOURS(className = 'ImageHolder', options = {\n  rootMargin: '100px',\n}) {\n  /** @type {Array<Element>} */\n  const objects = [...document.querySelectorAll(`img.${className}`)]\n  const io = makeIo(callback, options)\n  objects.forEach((object) => {\n    io.observe(object)\n  })\n}","import makeIo from './make-io'\n\nexport default function SPLENDID_CONTOURS() {\n  const holders = [...document.querySelectorAll('img.ImageHolder')]\n  const io = makeIo(callback)\n\n  holders.forEach((holder) => {\n    io.observe(holder)\n  })\n}\n\n/**\n * When ImageHolder comes into view.\n * @param {Element} target\n */\nconst callback = (target) => {\n  const noscript = /** @type {!HTMLElement} */ (target.nextElementSibling)\n  if (noscript.tagName != 'NOSCRIPT') {\n    return console.warn('sibling not a noscript')\n  }\n  const picture = document.createElement('picture')\n  target.parentElement.insertBefore(picture, target.nextSibling)\n  let st = ''\n  const html = noscript.textContent\n    .replace(/(<picture[^>]+?)style=\"([^\"]*?)\"/, (m, g, s) => {\n      st = s\n      return g\n    })\n    .replace('<picture ', `<picture style=\"${[st, 'display:none!important'].filter(Boolean).join(';')}\" `)\n\n  // picture._initialStyle = st\n  picture.outerHTML = html\n  noscript.parentElement.removeChild(noscript)\n}\n\n/**\n * @param {!Element} object\n */\nconst hideObject = (object, seconds) => {\n  object.style.animation = object.style.webkitAnimation = `contourFadeOut ${seconds}s ease-out`\n  setTimeout(() => {\n    object.style.setProperty('opacity', '0')\n    object.style.animation = object.style.webkitAnimation = ''\n    // object.parentElement.removeChild(object)\n    object['_finishedAppear'] = true\n  }, seconds * 1000)\n}\n\n/**\n * The callback for when webp is loaded.\n * @param {HTMLImageElement} img\n */\nwindow['webploaded'] = (img) => {\n  const picture = /** @type {HTMLPictureElement} */ (img.parentElement)\n  const oid = `o${picture.id}`\n  const o = document.getElementById(oid)\n  if (o) hideObject(o, 7)\n\n  const svg = picture.previousElementSibling\n  svg['_picture'] = picture.querySelector('img')\n  svg.parentElement.removeChild(svg)\n\n  picture.style.cssText = picture.style.cssText.replace(/;?\\s*display:\\s*none\\s*!important;?$/, '')\n  picture.style.animation = picture.style.webkitAnimation = 'fadeInFromNone 2.5s ease-out'\n}\n","import makeIo from './make-io'\n\n/**\n * Non-webp handling of images\n */\nexport default () => {\n  const imgTags = [\n    ...document.querySelectorAll('img[data-io]'),\n  ].filter(({ parentNode }) => {\n    return parentNode.tagName != 'PICTURE'\n  })\n  const images = [\n    ...document.querySelectorAll('picture[data-io]'),\n    ...imgTags,\n  ]\n  const io = makeIo(callback, { rootMargin: '76px' })\n  images.forEach((img) => {\n    img.removeAttribute('io')\n    io.observe(img)\n  })\n}\n\nconst supportsSrcSet = 'srcset' in document.createElement('img')\n\n/**\n * @param {Element} element\n */\nconst handleElement = (element) => {\n  const src = element.getAttribute('data-src')\n  const srcset = element.getAttribute('data-srcset')\n\n  element.removeAttribute('data-src')\n  element.removeAttribute('data-srcset')\n\n  if (element.src) { // hot-swap\n    const img = document.createElement('img')\n    assign(src, srcset, img)\n    img.onload = () => {\n      assign(src, srcset, element)\n    }\n  } else assign(src, srcset, element)\n}\n\nconst assign = (src, srcset, element) => {\n  if (src && (!supportsSrcSet || !srcset)) {\n    element.src = src\n  }\n  if (srcset && supportsSrcSet) {\n    element.srcset = srcset\n  }\n}\n\n/**\n * @param {Element} target\n */\nconst callback = (target) => {\n  switch (target.tagName) {\n  case 'PICTURE': {\n    const sources = [...target.querySelectorAll('source'), target.querySelector('img')]\n    sources.forEach(handleElement)\n    break\n  }\n  case 'IMG':\n    handleElement(target)\n  }\n}","import SPLENDID_CONTOURS from './contours'\nimport WEBP from './webp'\nimport IO from './io'\n\n// refresh placeholders with srcset\nwindow['SPLENDID_SVG_PLACEHOLDER'] = () => {\n  const svgs = [...document.querySelectorAll('.ImageHolder')]\n  svgs.forEach((svg) => {\n    const s = /width='(\\d+)'\\s+height='(\\d+)'/.exec(svg.src)\n    if (!s) return\n    const [,width, height] = s\n    const aspect = width / height\n    const noscript = svg.nextElementSibling\n    if (noscript.tagName != 'NOSCRIPT') return\n    let srcset = /<img[\\s\\S]*?\\ssrcset=\"([^\"]+)\"/.exec(noscript.textContent)\n    if (!srcset) return\n    [,srcset] = srcset\n    const widths = srcset.split(',').map((a) => {\n      let w = /\\s(\\d+)w$/.exec(a)\n      if (!w) return 0\n      ;[, w] = w\n      return w\n    })\n    const ss = widths.map((w) => {\n      const h = w / aspect\n      const sv = `<svg xmlns='http://www.w3.org/2000/svg' width='${w}' height='${h}'/>`\n      const bsv = btoa(sv)\n      const t = `data:image/svg+xml;base64,${bsv}`\n      const src = `${t} ${w}w`\n      return src\n    })\n    svg.srcset = ss.join(',')\n    // debugger\n  })\n}\n\nwindow['SPLENDID_SVG_PLACEHOLDER']()\n\nwindow['IO'] = IO\nIO()\n\nwindow['WEBP'] = WEBP\nWEBP()\n\nwindow['SPLENDID_CONTOURS'] = SPLENDID_CONTOURS\nSPLENDID_CONTOURS('ImageHolder', {\n  rootMargin: '150px',\n})"],
"names":["$jscomp.arrayIteratorImpl","makeIo","callback","options","rootMargin","io","IntersectionObserver","entries","forEach","target","isIntersecting","unobserve","obj","element","rect","getBoundingClientRect","top","window","scrollY","left","scrollX","width","height","cs","getComputedStyle","pt","parseInt","paddingTop","pb","paddingBottom","pl","paddingLeft","pr","paddingRight","bt","borderTopWidth","bl","borderLeftWidth","br","borderRightWidth","bb","borderBottomWidth","style","position","object","potrace","getAttribute","potraceNoAnimate","potraceNoInteract","removeAttribute","oid","id","replace","document","createElement","type","visibility","data","positionAbsolute","addEventListener","onload","svg","doc","querySelector","use","setAttribute","animatePaths","clearTransition","onmouseover","obj.onmouseover","opacity","contentDocument","onmouseleave","obj.onmouseleave","reverse","body","appendChild","opts","seconds","$jscomp.arrayFromIterable","querySelectorAll","paths","path","length","getTotalLength","transition","webkitTransition","l","SPLENDID_CONTOURS","className","objects","observe","holders","holder","noscript","nextElementSibling","tagName","console","warn","picture","parentElement","insertBefore","nextSibling","st","html","textContent","m","g","s","filter","Boolean","join","outerHTML","removeChild","hideObject","animation","webkitAnimation","setTimeout","setProperty","img","o","getElementById","previousElementSibling","cssText","imgTags","parentNode","images","supportsSrcSet","handleElement","src","srcset","assign","img.onload","sources","svgs","exec","$jscomp.makeIterator","aspect","ss","split","map","widths","a","w","btoa","bsv","IO","WEBP"]
}
